import type { LayerRef } from "circuit-json"
import type { ReactElement } from "react"
import { z } from "zod"

/**
 * This is an abbreviated definition of the soup elements that you can find here:
 * https://docs.tscircuit.com/api-reference/advanced/soup#pcb-smtpad
 */
export type FootprintSoupElements = {
  type: "pcb_smtpad" | "pcb_plated_hole"
  x: string | number
  y: string | number
  layer?: LayerRef
  holeDiameter?: string | number
  outerDiameter?: string | number
  shape?: "circle" | "rect"
  width?: string | number
  height?: string | number
  portHints?: string[]
}

export type Num50 =
  | "1"
  | "2"
  | "3"
  | "4"
  | "5"
  | "6"
  | "7"
  | "8"
  | "9"
  | "10"
  | "11"
  | "12"
  | "13"
  | "14"
  | "15"
  | "16"
  | "17"
  | "18"
  | "19"
  | "20"
  | "21"
  | "22"
  | "23"
  | "24"
  | "25"
  | "26"
  | "27"
  | "28"
  | "29"
  | "30"
  | "31"
  | "32"
  | "33"
  | "34"
  | "35"
  | "36"
  | "37"
  | "38"
  | "39"
  | "40"
  | "41"
  | "42"
  | "43"
  | "44"
  | "45"
  | "46"
  | "47"
  | "48"
  | "49"
  | "50"

export type Num4_50 =
  | "4"
  | "5"
  | "6"
  | "7"
  | "8"
  | "9"
  | "10"
  | "11"
  | "12"
  | "13"
  | "14"
  | "15"
  | "16"
  | "17"
  | "18"
  | "19"
  | "20"
  | "21"
  | "22"
  | "23"
  | "24"
  | "25"
  | "26"
  | "27"
  | "28"
  | "29"
  | "30"
  | "31"
  | "32"
  | "33"
  | "34"
  | "35"
  | "36"
  | "37"
  | "38"
  | "39"
  | "40"
  | "41"
  | "42"
  | "43"
  | "44"
  | "45"
  | "46"
  | "47"
  | "48"
  | "49"
  | "50"

export type Num10 = "1" | "2" | "3" | "4" | "5" | "6" | "7" | "8" | "9" | "10"

export type Num128 =
  | "1"
  | "2"
  | "3"
  | "4"
  | "5"
  | "6"
  | "7"
  | "8"
  | "9"
  | "10"
  | "11"
  | "12"
  | "13"
  | "14"
  | "15"
  | "16"
  | "17"
  | "18"
  | "19"
  | "20"
  | "21"
  | "22"
  | "23"
  | "24"
  | "25"
  | "26"
  | "27"
  | "28"
  | "29"
  | "30"
  | "31"
  | "32"
  | "33"
  | "34"
  | "35"
  | "36"
  | "37"
  | "38"
  | "39"
  | "40"
  | "41"
  | "42"
  | "43"
  | "44"
  | "45"
  | "46"
  | "47"
  | "48"
  | "49"
  | "50"
  | "51"
  | "52"
  | "53"
  | "54"
  | "55"
  | "56"
  | "57"
  | "58"
  | "59"
  | "60"
  | "61"
  | "62"
  | "63"
  | "64"
  | "65"
  | "66"
  | "67"
  | "68"
  | "69"
  | "70"
  | "71"
  | "72"
  | "73"
  | "74"
  | "75"
  | "76"
  | "77"
  | "78"
  | "79"
  | "80"
  | "81"
  | "82"
  | "83"
  | "84"
  | "85"
  | "86"
  | "87"
  | "88"
  | "89"
  | "90"
  | "91"
  | "92"
  | "93"
  | "94"
  | "95"
  | "96"
  | "97"
  | "98"
  | "99"
  | "100"
  | "101"
  | "102"
  | "103"
  | "104"
  | "105"
  | "106"
  | "107"
  | "108"
  | "109"
  | "110"
  | "111"
  | "112"
  | "113"
  | "114"
  | "115"
  | "116"
  | "117"
  | "118"
  | "119"
  | "120"
  | "121"
  | "122"
  | "123"
  | "124"
  | "125"
  | "126"
  | "127"
  | "128"

export type TwoPinStandard = "0402" | "0603" | "0805" | "1206"

export type KnownFootprintStrings =
  | TwoPinStandard
  | `led_${TwoPinStandard}`
  | `resistor_${TwoPinStandard}`
  | `cap_${TwoPinStandard}`
  | `diode_${TwoPinStandard}`
  | "smb"
  | "sod123"
  | "son8"
  | "smf"
  | `soic${Num50}`
  | `tssop${Num4_50}`
  | `pinrow${Num50}`
  | `qfp${Num4_50}`
  | "to92_inline"
  | "ms013"
  | "sot723"
  | "sot457"
  | `bga_${Num50}x${Num50}`
  | `vssop${Num4_50}`
  | `dip${Num4_50}`
  | "sot23_3"
  | "sot23_6"
  | `quad${Num50}`
  | "sot457_wave"
  | "sot457"
  | "to92s"
  | "to92_2"
  | "sod323"
  | "sod80"
  | "sot223"
  | "sot23w"
  | "smc"
  | `pinrow${Num50}_female`
  | "to220_3"
  | "micomelf"
  | "sod123f"
  | `bga${Num128}`
  | `stampboard_left${Num4_50}_right${Num4_50}_bottom${Num4_50}_top${Num4_50}`
  | "potentiometer"
  | "pushbutton"
  | `solderjumper${Num10}`
  | "sot223_5"
  | `mlp${Num50}`
  | "electrolytic"

export type FootprintString = KnownFootprintStrings | (string & {})

export type Footprint = FootprintString | ReactElement | FootprintSoupElements[]
export const footprintProp = z.custom<Footprint>((v) => true)
